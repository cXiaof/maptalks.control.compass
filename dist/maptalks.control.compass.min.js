/*!
 * maptalks.control.compass v0.1.3
 * LICENSE : MIT
 * (c) 2016-2020 maptalks.org
 */
/*!
 * requires maptalks@>=0.31.0 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.maptalks=t.maptalks||{})}(this,function(t){"use strict";function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var o=Object.getOwnPropertyNames(e),s=0;s<o.length;s++){var i=o[s],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var o,s=(e(i,o=maptalks.control.Control),i.prototype.buildOn=function(){var t=this._getCompass();this._compass=t;var e=this.options.transform,o="background-color: "+this.options.backgroundColor+";";return e&&(o+=" transform: "+e+";"),maptalks.DomUtil.setStyle(this._compass,o),t},i.prototype.onAdd=function(){this.map=this.getMap(),this.map.on("animating mousemove touchmove",this._rotateCompass,this),this._rotateCompass()},i.prototype.onRemove=function(){this.map.off("animating mousemove touchmove",this._rotateCompass,this),this._compass.remove(),delete this._compass,delete this._bearing,delete this._needle,delete this.map},i.prototype._rotateCompass=function(){var t=this.map.getBearing().toFixed(1);t<=180&&(t*=-1),t!==this._bearing&&(this._bearing=t,maptalks.DomUtil.setStyle(this._needle,"transform: rotate("+this._bearing+"deg);"))},i.prototype._getCompass=function(){var t=this._createDivWithClassName(this.COMPASS),e=this._getDial(),o=this._getNeedle();return t.appendChild(e),t.appendChild(o),t},i.prototype._getDial=function(){for(var t=this._createDivWithClassName(this.DIAL),e=0;e<4;e++){var o=this._getClock();t.appendChild(o)}return t},i.prototype._getClock=function(){return this._createDivWithClassName(this.CLOCK)},i.prototype._getNeedle=function(){var t=this._createDivWithClassName(this.NEEDLE);return this._needle=t},i.prototype._createDivWithClassName=function(t){return maptalks.DomUtil.createEl("div",t)},i);function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t));return e.COMPASS="maptalks-compass",e.DIAL="maptalks-compass-dial",e.NEEDLE="maptalks-compass-needle",e.CLOCK="maptalks-compass-dial-clock",e}s.mergeOptions({position:"top-right",backgroundColor:"#172029",transform:""}),t.CompassControl=s,Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("maptalks.control.compass v0.1.3, requires maptalks@>=0.31.0.")});